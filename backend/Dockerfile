FROM openjdk:17-slim

ARG PROFILE
ARG KAKAO_CLIENT
ARG KAKAO_SECRET
ARG AWS_ACCESSKEY
ARG AWS_BUCKET_NAME
ARG AWS_SECRETKEY


COPY build/libs/moneyandlove-0.0.1-SNAPSHOT.jar app.jar

ENV PROFILE=${PROFILE}
ENV KAKAO_CLIENT=${KAKAO_CLIENT}
ENV KAKAO_SECRET=${KAKAO_SCERET}
ENV AWS_ACCESSKEY=${AWS_ACCESSKEY}
ENV AWS_BUCKET_NAME=${AWS_BUCKET_NAME}
ENV AWS_SECRETKEY=${AWS_SECRETKEY}

EXPOSE 8080

ENTRYPOINT ["java", "-jar", "-Dspring.profiles.active=${PROFILE}", "/app.jar"]